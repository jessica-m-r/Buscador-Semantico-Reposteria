<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Buscador de Reposter√≠a</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">

    <!-- CSS EXTERNO -->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/styles.css') }}">
</head>
<body>
    <!-- Header con buscador -->
    <div class="header">
        <h1>Buscador de Reposter√≠a</h1>
        
        <form method="POST" class="search-container">
            <input type="text" name="term" placeholder="Busca brownies, pasteles, chocolate..." value="{{ term }}">
            <button type="submit">üîç Buscar</button>
        </form>
    </div>

    <!-- Resultados locales -->
    <div class="results-container">
        <h2>Resultados Locales</h2>
        {% if results_local %}
            <div class="results-grid">
                {% for item in results_local %}
                    <div class="card">
                        <div class="card-header">
                            <h3>{{ item.nombre }}</h3>
                        </div>

                        {% if item.clases %}
                        <div class="card-section">
                            <div class="section-title">Clasificaci√≥n</div>
                            <div class="tag-container">
                                {% for clase in item.clases %}
                                    <span class="tag">{{ clase }}</span>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}

                        {% if item.superclases %}
                        <div class="card-section">
                            <div class="section-title">Superclases</div>
                            <div class="tag-container">
                                {% for super in item.superclases %}
                                    <span class="tag">{{ super }}</span>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}

                        {% if item.descripcion %}
                        <div class="card-section">
                            <div class="section-title">Descripci√≥n</div>
                            <p>{{ item.descripcion }}</p>
                        </div>
                        {% endif %}

                        {% if item.categorias %}
                        <div class="card-section">
                            <div class="section-title">Categor√≠as</div>
                            <div class="tag-container">
                                {% for cat in item.categorias %}
                                    <span class="tag">{{ cat }}</span>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}

                        {% if item.es_producto %}
                            {% if item.ingredientes %}
                            <div class="card-section">
                                <div class="section-title">Ingredientes</div>
                                <ul>
                                    {% for ing in item.ingredientes %}
                                        <li>{{ ing }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}

                            {% if item.herramientas %}
                            <div class="card-section">
                                <div class="section-title">Herramientas</div>
                                <ul>
                                    {% for h in item.herramientas %}
                                        <li>{{ h }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}

                            {% if item.tecnicas %}
                            <div class="card-section">
                                <div class="section-title">T√©cnicas</div>
                                <ul>
                                    {% for t in item.tecnicas %}
                                        <li>{{ t }}</li>
                                    {% endfor %}
                                </ul>
                            </div>
                            {% endif %}
                        {% endif %}

                        {% if item.atributos %}
                        <div class="card-section">
                            <div class="section-title">Atributos</div>
                            <div class="attributes-grid">
                                {% for key, values in item.atributos.items() %}
                                    <div class="attribute-item">
                                        <div class="attribute-key">{{ key }}</div>
                                        <div class="attribute-values">{{ values|join(', ') }}</div>
                                    </div>
                                {% endfor %}
                            </div>
                        </div>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No se encontraron resultados locales.</p>
        {% endif %}
    </div>

    <!-- Resultados DBpedia -->
    <div class="results-container">
        <h2>Resultados Online (DBpedia)</h2>
        {% if results_dbpedia %}
            <div class="results-grid">
                {% for item in results_dbpedia %}
                    <div class="card">
                        <div class="card-header">
                            <h3>{{ item.nombre }}</h3>
                        </div>

                        <div class="card-section">
                            <div class="section-title">Tipo</div>
                            <p>{{ item.tipo }}</p>
                        </div>

                        <div class="card-section">
                            <div class="section-title">Descripci√≥n</div>
                            <p>{{ item.descripcion }}</p>
                        </div>

                        <div class="card-section">
                            <div class="section-title">Ingredientes</div>
                            <ul>
                                {% for ing in item.ingredientes %}
                                    <li>{{ ing }}</li>
                                {% endfor %}
                            </ul>
                        </div>

                        <div class="card-section">
                            <div class="section-title">Enlace DBpedia</div>
                            <a href="{{ item.dbpedia_uri }}" target="_blank">Ver recurso en DBpedia</a>
                        </div>
                    </div>
                {% endfor %}
            </div>
        {% else %}
            <p>No se encontraron resultados en DBpedia.</p>
        {% endif %}
    </div>

</body>
</html>
